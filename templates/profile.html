{% extends 'base.html' %}

{% block title %}
profile
{% endblock %}

{% block content %}
<div class="card shadow-sm mb-4">

    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Profile</h5>
    </div>

    <div class="card-body">

        <div class="d-flex align-items-center mb-3">
            <h6 class="text-primary me-2 mb-0">Name:</h6>
            <p class="mb-0 text-dark">{{ session.fullname }}</p>
        </div>

        <div class="d-flex align-items-center mb-3">
            <h6 class="text-primary me-2 mb-0">Email:</h6>
            <p class="mb-0 text-dark">{{ session.email }}</p>
        </div>

        <div class="d-flex align-items-center">
            <h6 class="text-primary me-2 mb-0">Count of articles:</h6>
            <span class="badge text-bg-info fs-6">{{ session.count_of_posts }}</span>
        </div>

    </div>

</div>

<h1 class="mb-4">Articles</h1>

{% for el in articles %}
<div>
    <div class="row g-0 border rounded overflow-hidden flex-md-row mb-1 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
            <h3 class="mb-0">{{ el.title }}</h3>
            <div class="mb-1 text-body-secondary">{{ users[el.user_id].full_name }} - {{ el.date_created.date() }}</div>
            <p class="card-text mb-auto">
                <br>{{ el.intro }}
            </p>
            <a href="/post/{{ el.id }}" class="icon-link gap-1 icon-link-hover stretched-link">
                Continue reading >
            </a>

        </div>
        <div class="col-auto d-none d-lg-block">
            <svg aria-label="Placeholder: Thumbnail" class="bd-placeholder-img" height="250" preserveAspectRatio="xMidYMid slice" width="200">
                <title>{{ el.title }}</title>

                <rect width="100%" height="100%" fill="#55595c"></rect>

                <image href="{{ url_for('static', filename='img/uploads/' + el.image) }}" width="100%" height="100%" x="0" y="0" preserveAspectRatio="xMidYMid slice"/>
            </svg>
        </div>
    </div>

    {% if el.user_id == session.user_id %}
        <div class="d-flex gap-2 mb-4">
            <a href="/delete_post/{{ el.id }}" class="btn btn-danger btn-sm">
                    Delete
            </a>

            <a href="/update_post/{{ el.id }}" class="btn btn-success btn-sm">
                Update
            </a>

        </div>
    {% endif %}

</div>
{% endfor %}



{% endblock %}